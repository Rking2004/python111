# 当当网图书销售数据爬取系统
# 项目简介
这是一个爬取当当网图书销售数据的Python项目，实现了从数据爬取、存储、解析、分析到可视化的完整流程。同时，自动生成存储目录，方便用户灵活查询和管理已存储的数据。
# 项目功能       
- **多维度数据爬取**：支持5种时间维度的图书销售排行数据抓取：往年全年排行（2021-2024年），2025年各月排行，最近30天排行，最近7天排行，最近24小时排行。
- **智能数据采集**：自动构建URL并分页爬取数据，设置请求头模拟浏览器行为，添加延时防止被反爬，支持GBK编码处理。
- **数据存储管理**：原始HTML网页保存，解析后的结构化数据保存为CSV格式，自动创建目录结构（data/, analysis/, matplot/）。
- **数据清洗与解析**：使用BeautifulSoup解析HTML，提取关键图书信息：书名、作者、出版社、出版日期、价格、折扣、评论数等，智能清洗书名（去除特殊符号、括号内容等），处理缺失数据和异常值。
- **多维度数据分析**：作者分析：最受欢迎作者排行，出版社分析：出版图书最多的出版社排行，热度分析：讨论最多的图书排行（带评论数比例），价格分析：最便宜图书价格排行与平均价差价，折扣分析：图书折扣力度排行榜与降价幅度。
- **丰富的数据可视化**：条形图：最受欢迎作者、出版时间与评论数对比，饼图：出版社市场占用率，折线图：图书价格与原价对比，对比图：折扣力度与评论数关系，跨平台适配：自动适配Windows、MacOS字体显示。
- **用户友好交互**：命令行交互界面，输入验证和错误处理，进度提示和状态反馈，可视化结果展示选项。
# 技术栈
- **核心语言**：Python
- **网络请求层**：Requests：同步HTTP请求库，用于获取网页数据。延时控制：time.sleep() 实现简单的请求间隔控制。
- **数据解析层**：BeautifulSoup4：HTML解析和内容提取。正则表达式 (re)：模式匹配和数据清洗。
- **数据存储层**：文件系统操作 (os)：目录创建和文件管理。CSV格式存储：使用Pandas进行结构化数据存储。HTML原始文件保存：保留原始网页数据备份。
- **数据处理与分析层**：Pandas：数据框操作、统计分析和CSV输出。NumPy：数值计算和数据处理。
- **数据可视化层**：Matplotlib：多种图表绘制和可视化。跨平台字体适配：自动检测系统并设置合适字体。
- **系统交互层**：Platform：操作系统检测和适配。命令行交互：用户输入处理和菜单选择。输入验证：基本错误处理和输入检查。
# 项目结构
```
├── dangdang.py                            # 主程序文件，完整的爬虫+分析+可视化流程
├── data/                              # 数据存储目录
│   ├── dangdang-最近30天-10页.html     # 原始HTML网页文件
│   ├── dangdang-2025年-5页.html        # 原始HTML网页文件  
│   └── 2025年-5页.csv                  # 解析后的CSV数据文件
├── analysis/                          # 分析结果目录
│   ├── 2025年最受欢迎作者排行.csv        # 作者分析结果
│   ├── 2025年出版图书最多出版社排行.csv    # 出版社分析结果
│   ├── 2025年讨论最多图书排行.csv        # 热度分析结果
│   ├── 2025年最便宜图书价格排行与平均价差价.csv  # 价格分析结果
│   └── 2025年图书折扣力度排行榜.csv        # 折扣分析结果
└── matplot/                           # 可视化图表目录
    ├── 2025年最受欢迎作者.png           # 作者条形图
    ├── 2025年热门图书出版社市场占用率.png   # 出版社饼图
    ├── 2025年图书价格与原价对比.png       # 价格折线图
    ├── 2025年图书出版时间与评论数对比.png   # 时间条形图
    └── 2025年折扣力度与评论数对比.png      # 折扣条形图
```
# 安装使用和运行项目
先使用 pip 安装项目所需的 Python 库（requests，pandas等），然后把dangdang.py文件下载，然后运行即可使用。
# 项目亮点
- **基于Requests的稳健同步采集架构**：采用成熟的Requests库配合自定义Header模拟和延时控制，构建了稳定可靠的数据采集管道，有效规避反爬机制，确保数据采集的成功率和完整性。
- **BeautifulSoup4+正则表达式的双重解析引擎**：结合BeautifulSoup4的DOM解析能力与正则表达式的模式匹配优势，实现了对复杂HTML结构的精准数据提取，特别是对图书元数据的多层次清洗和规范化处理。
- **Pandas+NumPy的学术级数据分析**：运用Pandas DataFrame进行结构化数据处理，配合NumPy数值计算，实现了多维度统计分析和衍生指标计算，包括评论数比例分析、价格差异计算和折扣力度量化。
- **Matplotlib跨平台可视化**：基于Matplotlib构建了完整的可视化体系，通过platform模块智能检测操作系统并动态适配字体配置，确保了可视化图表在Windows、MacOS等多平台的渲染一致性。
- **文件系统级数据持久化**：采用分层存储架构，原始HTML、结构化CSV、分析结果和可视化图表分别存储，形成了完整的数据溯源链条，支持研究结果的验证和复现。
# 未来规划
- 把网页的排版做的美观一些。
- 引入asyncio和aiohttp实现高并发采集，提升数据获取效率10倍。
- 构建IP代理池应对反爬机制。
- 扩展至京东、亚马逊等多平台数据采集。


